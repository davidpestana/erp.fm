{% extends "erpBundle::layout.modal.html.twig" %}

{% form_theme form _self %}

{% block _fm_erpbundle_pedido_items_entry_row %}
	{% spaceless %}
    	<div class="piece alert alert-block alert-info fade in">
        	   <!-- <button type="button" class="close">&times;</button>-->
        	    <button type="button" class="close" data-dismiss="alert"></button>

        		{# form_label(form) #}
        		{{ form_errors(form) }}
        		{{ form_widget(form) }}
        		<div class="clear"></div>
    	</div>
	{% endspaceless %}
{% endblock %}



{% block title -%} 

Vas a añadir los siguientes conceptos referentes a la factura <b>{{entity.codFactura}}</b> en un pedido a proveedores 

{% endblock %}

{% block body -%}
 <style type="text/css">
	#fm_erpbundle_pedido_items .piece {position:relative;}
	#fm_erpbundle_pedido_items .piece div div:nth-child(1){  }
	#fm_erpbundle_pedido_items .piece div div:nth-child(2){  }
	#fm_erpbundle_pedido_items .piece div div:nth-child(3){  }
	#fm_erpbundle_pedido_items .piece div div:nth-child(4){  }

	#fm_erpbundle_pedido_items .piece div div textarea{ width:100%;}
	#fm_erpbundle_pedido_items .piece div div input{ width:100%;}
	#fm_erpbundle_pedido_items .piece .clear {clear:both;}
    #fm_erpbundle_pedido_items .ms-container ul.ms-list { height: 100px}
</style>

 <style type="text/css">
	.input-sm {with:50px;}
</style>
         <span class="alert">
            {% if entity.pedidos|length %}
            precaucion, lineas de esta factura fueron añadidas anteriormente a algún pedido {# entity.pedido.id #}
            {% else %} 
            esta factura aun no ha sido añadida a ningun pedido 
            {% endif %}
        </span> 

<div class="row-fluid">
    <div class="span6">

        <a class="btn blue"  onclick="addList('fm_erpbundle_pedido_items')"> 
                   <i class="icon-plus"></i>
                   AGREGAR LINEA AL PEDIDO
        </a>

        {{ form(form) }} 

        <script language="javascript">
            function addList(id){
                let el = document.getElementById(id);
                let child = document.createElement('div');
                child.innerHTML = el.getAttribute('data-prototype').replace(/__name__/g, el.childNodes.length);
                el.appendChild(child);
            };


            function sendForm(event) {
                event.preventDefault();
                document.getElementById('addItemsForm').action = event.srcElement.href;
                document.getElementById('addItemsForm').submit();
            };

        </script>


        {# <table class="table">
                <thead>
                    <tr>
                        <th>Detalle pedido</th>
                        <th>unidades</th>
                        <th>Observaciones</th>
                        <th>Proveedor</th>
                    </tr>
                </thead>
                {% for producto in entity.misitems  %}
                      <tr font-size="13px">
                        <td border-color="#eb613d" padding="5px"><input type="text" value="{{ producto.descripcion}}" /></td>
                        <td border-color="#eb613d" padding="5px" text-align="center"><input type="number" class="input-sm" value="{{ producto.cantidad }}" /> </td>
                        <td border-color="#eb613d" padding="5px" text-align="right"> <input type="text" value="" placeholder="observaciones" /> </td>
                        <td border-color="#eb613d" padding="5px" text-align="right"> <select><option value="">selecciona proveedor para agregar</option><option value="carpintero">Carpintero</option><option value="tapicero">Tapicero</option></select></td>
                      </tr>
                {% endfor %}
      </table> #}
    </div>
    <div class="span6">
        {{ render(controller('erpBundle:Pedido:select')) }}
    </div>
</div>
{% endblock %}
